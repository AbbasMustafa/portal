{% extends './superAdmin/base.html' %}
{% block body %}

	<style>
		.order-actions a{
			margin-right:5px;
		}
		.order-actions{
			z-index: 999;
		}

		#example tr:hover{
			background: rgba(0,0,0,0.4);
			cursor: pointer;
		}

	</style>

	<link href="{{ url_for('static', filename='plugins/datatable/css/dataTables.bootstrap5.min.css')}}" rel="stylesheet" />
		
		

		
		<!--end header -->
		<!--start page wrapper -->
		<div class="page-wrapper">
			<div class="page-content">
				<!--breadcrumb-->
				<div class="page-breadcrumb d-none d-sm-flex align-items-center mb-3">
					<div class="ps-3">
						<nav aria-label="breadcrumb">
							<ol class="breadcrumb mb-0 p-0">
								<li class="breadcrumb-item"><a href="javascript:;"><i class="bx bx-home-alt"></i></a>
								</li>
								<li class="breadcrumb-item active" aria-current="page">Users Table</li>
							</ol>
						</nav>
					</div>
				</div>
				
				<!--end breadcrumb-->
				<h6 class="mb-0 text-uppercase">Users</h6>
				<hr/>
				<div class="card">
					<div class="card-body">
						<div class="table-responsive">
							<table id="example" class="table table-striped table-bordered" style="width:100%">
								<thead>
									<tr>
										<th>Name</th>
										<th>Designation</th>
										<th>Department</th>
										<th>Manager</th>
										<th>Salary</th>
										<th>Registerd On</th>
										<th>Actions</th>
									</tr>
								</thead>
								<tbody>
									{% for users in users %}
									<tr>
										<td>{{ users.employee_name }}</td>
										<td>{{ users.designation }}</td>
										<td>{{ users.department_name }}</td>
										<td>{{ users.manager_name }}</td>
										<td>{{ users.salary }}</td>
										<td>{{ users.register_date }}</td>
										<td>
											<div class="d-flex order-actions">	
												<a data-user-id="{{ users.employee_id }}" class="lock"><i class="fa fa-lock"></i></a>
												<a href="/admin/edit-user/{{users.employee_id}}" class=""><i class="fa fa-pen"></i></a>
												<a data-user-id="{{ users.employee_id }}" class="ban"><i class="fa fa-stop"></i></a>
												<a href="javascript:;" class=""><i class="fa fa-message"></i></a>
											</div>
										</td>
									</tr>
									{% endfor %}
								</tbody>
							</table>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
	<!--end wrapper-->
	<!--start switcher-->
	
	<!--end switcher-->
	<!-- Bootstrap JS -->
	<!-- <script src="{{ url_for('static', filename='js/bootstrap.bundle.min.js') }}"></script> -->
	<!--plugins-->
	<script src="{{ url_for('static', filename='js/jquery.min.js') }}"></script>
	<script src="{{ url_for('static', filename='plugins/simplebar/js/simplebar.min.js') }}"></script>
	<script src="{{ url_for('static', filename='plugins/metismenu/js/metisMenu.min.js') }}"></script>
	<script src="{{ url_for('static', filename='plugins/perfect-scrollbar/js/perfect-scrollbar.js') }}"></script>
	<script src="{{ url_for('static', filename='plugins/datatable/js/jquery.dataTables.min.js') }}"></script>
	<script src="{{ url_for('static', filename='plugins/datatable/js/dataTables.bootstrap5.min.js') }}"></script>
	
	<script>
		username = "something";
		password = "something";
		Array.from(document.querySelectorAll('.lock')).forEach(item => {
			item.onclick = (event)=>{
				Swal.fire({

					// const url = "something";
					// const userId = event.currentTarget.dataset.userId;
					// fetch(url, {
					// 	methods:"POST",
					// 	headers:{
					// 		"content-type":"application/json"
					// 	},
					// 	body:{userId}
					// })
					// .then(response => response.json())
					// .then(body => {
					// 	const username = document.querySelector('#box-username').textContent = body.username;
					// 	cosnt password = document.querySelector('#box-password').textContent = body.password;
					// })
					
					title: `Username: ${username} 
							Password: ${password}`,
					icon: 'info',
					
				})

				
			}
		})

		document.querySelectorAll('.ban').forEach(item => {
			item.onclick = (event)=>{
				Swal.fire({
					title: 'Are you sure?',
					text: "You won't be able to Ban this User!",
					icon: 'warning',
					showCancelButton: true,
					confirmButtonColor: '#3085d6',
					cancelButtonColor: '#d33',
					confirmButtonText: 'Yes, delete it!'
					}).then((result) => {
					if (result.isConfirmed) {

							// const url = "something";
							// const userId = event.currentTarget.dataset.userId;
							// fetch(url, {
							// 	methods:"POST",
							// 	headers:{
							// 		"content-type":"application/json"
							// 	},
							// 	body:{userId}
							// })
							// .then(response => response.json())
							// .then(body => {
								// document.querySelector('.ban').forEach(item => {
								// 	if(item.dataset.userId == body.userId){
								// 		item.style.color = "red";
								// 	}
								// })
							// })
					}
					})
			}
		})
	</script>
	<!-- <script>
		$(document).ready(function() {
			console.log($('#example'));
			$('#example').DataTable(
			  
			  );
			$("div.dataTables_filter input").focus();
		  } );
	</script>
	 -->
	
	<script>
	$(document).ready(function () {
    	$.noConflict();
		$('#example').DataTable()
		});
	</script>
	
	
	<script>
		$(document).ready(function() {
			var table = $('#example2').DataTable( {
				lengthChange: false,
				buttons: [ 'copy', 'excel', 'pdf', 'print']
			} );
		 
			table.buttons().container()
				.appendTo( '#example2_wrapper .col-md-6:eq(0)' );
		} );
	</script>
	<!--app JS-->
	<script src="{{ url_for('static', filename='js/app.js') }}"></script>

{%endblock%}